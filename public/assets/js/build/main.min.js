var ChartJS=function(){var a=function(a){$.each(a,function(a,b){$(".tableRiskMatrix tr.customTrRisk").each(function(a,c){var d=$(c).data("impact");$(c).find("td").each(function(a,c){var e=$(c).data("prob"),f=d*e;f==b.risk_level&&e==b.probability&&d==b.impact&&($(c).children().children().eq(1).children().eq(0).children().eq(0).append("<li>"+b.name+"</li>"),$(c).children().children().eq(2).html("..."))})})})},b=function(){$(".more_info_text").each(function(){$(this).popover("hide")})},c=function(){$(".more_info_text").each(function(){var a=$(this).parent().children().eq(1).children().text(),b=$(this).parent().children().eq(1).children().html();""!=a.trim()?$(this).popover({content:b,html:!0,title:"Name of Risks",trigger:"manual",placement:"right",container:"body"}).on("click",function(a){$(this).popover("show"),a.stopPropagation()}):$(this).css("cursor","default")})};return{initialChartProjectRiskSetUp:function(a,b){var c=new Highcharts.Chart({chart:{type:"column",renderTo:"container",events:{drilldown:function(a){c.setTitle({text:"All risks for "+a.point.name}),c.yAxis[0].setTitle({text:"Risk Level"})},drillup:function(){c.setTitle({text:"Risk by Projects"}),c.yAxis[0].setTitle({text:"Number of Risks"})}}},title:{text:"Risk by Projects"},xAxis:{type:"category"},yAxis:{title:{text:"Number of Risks"}},legend:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0}}},series:[{name:"Risk by Projects",colorByPoint:!0,data:a}],drilldown:{series:b}});$(".filters").on("change",function(){window.location.href=BASE_URL+"/chart/projectRisk/"+$("#filter_projectType").val()})},initialChartRiskMatrixSetUp:function(d){var e=function(){$('[data-toggle="popover"]').popover(),d.length>0?$(".riskMatrix").show():$(".notFoundMatrix").show(),$(document).on("click",function(){b()}),$(".filters").on("change",function(){window.location.href=BASE_URL+"/chart/riskMatrix/"+$("#filter_project").val()})};e(),a(d),c()}}}(),FrecuencyJS=function(){var a=function(a){$(".table_associated").html(""),$(".ajaxMsg").hide(),$.ajax({url:BASE_URL+"/frecuency/searchAssociations",dataType:"json",data:a,type:"POST",success:function(a){"success"==a.status&&(console.log(a),a.numberRows>0?($(".table_associated").html(a.data),$("#tableProjectAssociation").DataTable({iDisplayLength:5,aLengthMenu:[[5,25,100,-1],[5,25,100,"All"]]})):$(".ajaxMsg").html("Whoops! There is no data to display!").show())}})};return{initialRiskSetUp:function(){$("#tableRiskFrecuency").DataTable({iDisplayLength:5,aLengthMenu:[[5,25,100,-1],[5,25,100,"All"]]}),$(".filters").on("change",function(){window.location.href=BASE_URL+"/frecuency/risk/"+$("#filter_projectType").val()}),$(".table_frencuency").on("click",".btnProjectAssociated",function(){var b=new Object;b.id=$(this).data("id"),b.type=$(this).data("type"),b.project_type_id=$("#filter_projectType").val(),a(b)})},initialProjectSetUp:function(){var b=$("#tableProjectFrecuency").DataTable({iDisplayLength:5,aLengthMenu:[[5,25,100,-1],[5,25,100,"All"]],dom:'<"row export"><"clear">lfrtip'}),c=new $.fn.dataTable.TableTools(b,{sSwfPath:BASE_URL+"/assets/bower_components/datatables-tabletools/swf/copy_csv_xls_pdf.swf",aButtons:[{sExtends:"xls",sCharSet:"utf8",sFileName:"excelExport.xls",sButtonText:"XLS"},{sExtends:"csv",sCharSet:"utf8",sFileName:"csvExport.csv",sButtonText:"CSV"},{sExtends:"pdf",sCharSet:"utf8",sFileName:"PDF_Export.pdf",sButtonText:"PDF"}]});$(".exportNav").html(c.fnContainer()),$(".table_frencuency").on("click",".btnProjectAssociated",function(){var b=new Object;b.id=$(this).data("id"),b.type=$(this).data("type"),a(b)})},initialDocumentSetUp:function(){var a=$("#tableDocumentMain").DataTable({iDisplayLength:10,sPaginationType:"bs_normal",sDom:'<"row"><"clear"><"row" <"col-md-3" l><"col-md-6 selectForms"><"col-md-3" f>r>t<"row"ip>',bFilter:!0}),b=new $.fn.dataTable.TableTools(a,{sSwfPath:BASE_URL+"/assets/bower_components/datatables-tabletools/swf/copy_csv_xls_pdf.swf",aButtons:[{sExtends:"xls",sCharSet:"utf8",sFileName:"excelExport.xls",sButtonText:"XLS"},{sExtends:"csv",sCharSet:"utf8",sFileName:"csvExport.csv",sButtonText:"CSV"},{sExtends:"pdf",sCharSet:"utf8",sFileName:"PDF_Export.pdf",sButtonText:"PDF"}]});$(".exportNav").html(b.fnContainer()),$(".container").on("change","#selectRisk , #selectProject",function(){$("#tableDocumentMain").dataTable().fnFilter($(this).val())})}}}(),RiskProjectJS=function(){var a=function(a){$(".content_form").html(""),$(".ajaxMsg").hide(),$.ajax({url:BASE_URL+"/riskProject/filterFormByAjax",dataType:"json",data:a,type:"POST",success:function(a){console.log(a),"success"==a.status&&(a.numberRows>0?$(".content_form").html(a.data):$(".ajaxMsg").html("Whoops! There is no data to display!").show())}})};return{initialSetUp:function(){$(".filters").on("change",function(){$("#filter_risk_project").val("");var b=new Object;b.valRisk=$("#filter_risk").val(),b.valProject=$("#filter_project").val(),a(b)}),$("#filter_risk_project").on("keyup",function(){if($("#filter_risk").val(0),$("#filter_project").val(0),$(this).val().length>=4||0==$(this).val().length){var b=new Object;b.valSearch=$(this).val().length>=4?$(this).val():"all",a(b)}})}}}();